<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Yan Tingshuai's Blog]]></title>
  <link href="http://yts1dx.github.io/atom.xml" rel="self"/>
  <link href="http://yts1dx.github.io/"/>
  <updated>2016-05-17T21:35:28+08:00</updated>
  <id>http://yts1dx.github.io/</id>
  <author>
    <name><![CDATA[Yan Tingshuai]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Pride and Prejudice]]></title>
    <link href="http://yts1dx.github.io/blog/2016/05/15/ao-man-yu-pian-jian/"/>
    <updated>2016-05-15T20:38:11+08:00</updated>
    <id>http://yts1dx.github.io/blog/2016/05/15/ao-man-yu-pian-jian</id>
    <content type="html"><![CDATA[<h1>简介</h1>

<p>Pride and Prejudice(中文:傲慢与偏见)，是英国小说家简·奥斯丁的代表作，主要讲述了班纳特家两个姐妹的爱情故事，反映了19世纪英国乡绅阶层的生活、民俗、爱情等。</p>

<h1>回味</h1>

<h2>书名</h2>

<p>刚开始阅读这部小说时，觉得这个书名很奇怪，通过书名无法体味到要表达怎样的一种情愫。但是随着阅读的深入，慢慢体会到这两个词贯穿了整个故事情节。“傲慢”毋庸置疑是对达西的评价，他是个富有的绅士，是一个大地主，是小说中描述的上层阶级，从小被教育要看不起除家里以外的任何人；但是，当爱情到来时，他察觉到了自己的傲慢，也用于放下自己的傲慢，哪怕是对哪些可能会影响其名誉的人仍旧如此。“偏见”指的是小说中的另一位主人公——伊丽莎白，她聪明伶俐，美丽大方，被所有人所喜爱，是的傲慢的达西一见钟情；然后，恰恰是她的“聪明”使他对很对事情有着自以为正确的偏见。当达西与伊丽莎白相遇后，这种傲慢与偏见的态度有都纷纷表现在对对方的态度上。好在故事的最后，主人公们为了爱情突破一道道屏障，最后走到了一起，从此过上了幸福快乐的生活。</p>

<h2>现实生活中的傲慢与偏见</h2>

<p>在阅读小说的过程中发现，日常中的我们不也是充满着傲慢与偏见吗？对于不如我们的人，我们是不是会存在着一种傲慢的心里对待他们，我想大多数的或多或少有一些的；对于做事风格与我们不符的人，我们又会不会对其有所偏见的，这个应该也是逃不过的。小说中，与达西和伊丽莎白产生明显对比的是另一对主人公：彬格莱和吉英。彬格莱先生性格温和、为人体贴；吉英美丽善良、温柔体贴、善解人意。生活中，如果能做到像他们一样，一定可以少许多的怨气，生活也会快乐些。世界上没有完美的人，许多我们所不喜欢的人往往都是由于自己的傲慢与偏见造成的，努力放弃这些，去捡拾每个人身上的优点，这样世界会更加美好。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Use Oracle Explain]]></title>
    <link href="http://yts1dx.github.io/blog/2016/05/15/use-oracle-explain/"/>
    <updated>2016-05-15T20:08:21+08:00</updated>
    <id>http://yts1dx.github.io/blog/2016/05/15/use-oracle-explain</id>
    <content type="html"><![CDATA[<h2>生成explain</h2>

<pre><code>SQL&gt; explain plan into plan_table for  select /*+index(test testi) */ * from t1;

Explained.
</code></pre>

<h2>查看含有outline的explain</h2>

<pre><code>SQL&gt; select * from table(dbms_xplan.display('PLAN_TABLE',NULL,'OUTLINE'));

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 3617692013

--------------------------------------------------------------------------
| Id  | Operation     | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |  |     1 |    13 |     2   (0)| 00:00:01 |
|   1 |  TABLE ACCESS FULL| T1    |     1 |    13 |     2   (0)| 00:00:01 |
--------------------------------------------------------------------------

Outline Data
-------------

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

  /*+
        BEGIN_OUTLINE_DATA
        FULL(@"SEL$1" "T1"@"SEL$1")
        OUTLINE_LEAF(@"SEL$1")
        ALL_ROWS
        DB_VERSION('11.2.0.2')
        OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
        IGNORE_OPTIM_EMBEDDED_HINTS
        END_OUTLINE_DATA
   */

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

Note
-----
   - dynamic sampling used for this statement (level=2)

26 rows selected.
</code></pre>

<h2>index 的表现</h2>

<pre><code>    SQL&gt; select * from table(dbms_xplan.display('plan_table',NULL,'OUTLINE'));

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    Plan hash value: 2965991605

    ---------------------------------------------------------------------------------
    | Id  | Operation    | Name     | Rows  | Bytes | Cost (%CPU)| Time |
    ---------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT |      |     1 |    13 |     0   (0)| 00:00:01 |
    |   1 |  INDEX FULL SCAN | SYS_C0011876 |     1 |    13 |     0   (0)| 00:00:01 |
    ---------------------------------------------------------------------------------

    Outline Data
    -------------

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

      /*+
          BEGIN_OUTLINE_DATA
          INDEX(@"SEL$1" "T1"@"SEL$1" ("T1"."C1"))
          OUTLINE_LEAF(@"SEL$1")
          ALL_ROWS
          DB_VERSION('11.2.0.2')
          OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
          IGNORE_OPTIM_EMBEDDED_HINTS
          END_OUTLINE_DATA
      */

    22 rows selected.
</code></pre>

<p>IOT表的表现
    SQL> select * from     table(dbms_xplan.display(&lsquo;plan_table&rsquo;,NULL,&lsquo;OUTLINE&rsquo;));</p>

<pre><code>    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    Plan hash value: 900014233

    ------------------------------------------------------------------------------------------
    | Id  | Operation        | Name      | Rows  | Bytes | Cost (%CPU)| Time     |
    ------------------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT     |           |     1 |  1050 |   802   (0)| 00:00:10 |
    |   1 |  INDEX FAST FULL SCAN| PK_ADMIN_DOCINDEX |     1 |  1050 |   802   (0)| 00:00:10 |
    ------------------------------------------------------------------------------------------

    Outline Data
    -------------

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

      /*+
          BEGIN_OUTLINE_DATA
          INDEX_FFS(@"SEL$1" "ADMIN_DOCINDEX"@"SEL$1" ("ADMIN_DOCINDEX"."TOKEN"
              "ADMIN_DOCINDEX"."DOC_ID"))
          OUTLINE_LEAF(@"SEL$1")
          ALL_ROWS
          DB_VERSION('11.2.0.2')
          OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
          IGNORE_OPTIM_EMBEDDED_HINTS
          END_OUTLINE_DATA

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      */

    Note
    -----
       - dynamic sampling used for this statement (level=2)

    27 rows selected.
</code></pre>

<h2>涉及到rewrite时，hint中的qb_name</h2>

<pre><code>    SQL&gt; select * from table(dbms_xplan.display('plan_table',NULL,'OUTLINE'));

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    Plan hash value: 1463220175

    -------------------------------------------------------------------------------------
    | Id  | Operation        | Name     | Rows  | Bytes | Cost (%CPU)| Time     |
    -------------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT     |          |     1 |    13 |     0   (0)| 00:00:01 |
    |   1 |  MERGE JOIN CARTESIAN|          |     1 |    13 |     0   (0)| 00:00:01 |
    |   2 |   INDEX FULL SCAN    | SYS_C0011876 |     1 |    13 |     0   (0)| 00:00:01 |
    |   3 |   BUFFER SORT        |          |     1 |       |     0   (0)| 00:00:01 |
    |   4 |    INDEX FULL SCAN   | SYS_C0011877 |     1 |       |     0   (0)| 00:00:01 |
    -------------------------------------------------------------------------------------

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Outline Data
    -------------

      /*+
          BEGIN_OUTLINE_DATA
          USE_MERGE_CARTESIAN(@"SEL$F5BB74E1" "T2"@"SEL$2")
          LEADING(@"SEL$F5BB74E1" "T1"@"SEL$2" "T2"@"SEL$2")
          INDEX(@"SEL$F5BB74E1" "T2"@"SEL$2" ("T2"."C2"))
          INDEX(@"SEL$F5BB74E1" "T1"@"SEL$2" ("T1"."C1"))
          OUTLINE(@"SEL$2")

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
          OUTLINE(@"SEL$1")
          MERGE(@"SEL$2")
          OUTLINE_LEAF(@"SEL$F5BB74E1")
          ALL_ROWS
          DB_VERSION('11.2.0.2')
          OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
          IGNORE_OPTIM_EMBEDDED_HINTS
          END_OUTLINE_DATA
      */

    31 rows selected.
</code></pre>

<h2>多表join的情况</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">explain</span> <span class="n">plan</span> <span class="k">into</span> <span class="n">plan_table</span> <span class="k">for</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">,</span><span class="n">t3</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Explained</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">table</span><span class="p">(</span><span class="n">dbms_xplan</span><span class="p">.</span><span class="n">display</span><span class="p">(</span><span class="s1">&#39;plan_table&#39;</span><span class="p">,</span><span class="k">NULL</span><span class="p">,</span><span class="s1">&#39;OUTLINE&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Plan</span> <span class="n">hash</span> <span class="n">value</span><span class="p">:</span> <span class="mi">457197764</span>
</span><span class='line'>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span> <span class="n">Id</span>  <span class="o">|</span> <span class="k">Operation</span>       <span class="o">|</span> <span class="n">Name</span>       <span class="o">|</span> <span class="k">Rows</span>  <span class="o">|</span> <span class="n">Bytes</span> <span class="o">|</span> <span class="n">Cost</span> <span class="p">(</span><span class="o">%</span><span class="n">CPU</span><span class="p">)</span><span class="o">|</span> <span class="n">Time</span>     <span class="o">|</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">0</span> <span class="o">|</span> <span class="k">SELECT</span> <span class="k">STATEMENT</span>      <span class="o">|</span>         <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">39</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>  <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span> <span class="o">|</span>          <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">39</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>   <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span><span class="o">|</span>          <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">26</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>    <span class="k">INDEX</span> <span class="k">FULL</span> <span class="n">SCAN</span>    <span class="o">|</span> <span class="n">SYS_C0011876</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span>    <span class="n">BUFFER</span> <span class="n">SORT</span>          <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>     <span class="k">INDEX</span> <span class="k">FULL</span> <span class="n">SCAN</span>   <span class="o">|</span> <span class="n">SYS_C0011877</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>   <span class="n">BUFFER</span> <span class="n">SORT</span>       <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">7</span> <span class="o">|</span>    <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span>  <span class="o">|</span> <span class="n">T3</span>        <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">Outline</span> <span class="k">Data</span>
</span><span class='line'><span class="c1">-------------</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*+</span>
</span><span class='line'><span class="cm">      BEGIN_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;T3&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="cm">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="cm">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="cm">      LEADING(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot; &quot;T3&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$1&quot; &quot;T3&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      INDEX(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot; (&quot;T2&quot;.&quot;C2&quot;))</span>
</span><span class='line'><span class="cm">      INDEX(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; (&quot;T1&quot;.&quot;C1&quot;))</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      ALL_ROWS</span>
</span><span class='line'><span class="cm">      DB_VERSION(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      OPTIMIZER_FEATURES_ENABLE(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      IGNORE_OPTIM_EMBEDDED_HINTS</span>
</span><span class='line'><span class="cm">      END_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'><span class="mi">33</span> <span class="k">rows</span> <span class="n">selected</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The First]]></title>
    <link href="http://yts1dx.github.io/blog/2016/02/12/the-first/"/>
    <updated>2016-02-12T19:35:55+08:00</updated>
    <id>http://yts1dx.github.io/blog/2016/02/12/the-first</id>
    <content type="html"><![CDATA[<h1>Hello World</h1>
]]></content>
  </entry>
  
</feed>
