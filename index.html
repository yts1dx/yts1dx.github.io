
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Yan Tingshuai's Blog</title>
  <meta name="author" content="Yan Tingshuai">

  
  <meta name="description" content="GDB输出相关 打印格式指定 print / \&lt;f> \&lt;expr> 输出基类执行绑定的动态类型 set print object on
p ptr 输出内存形式 x / nfu addr 以数组形式打印内存 p *array@len
p/x (short[2])0x12345678
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yts1dx.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Yan Tingshuai's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->
  <script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!-- <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> -->
<!-- <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> -->
<link href="//fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Yan Tingshuai's Blog</a></h1>
  
    <h2>A Blog of SQLer.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.baidu.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="yts1dx.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/06/04/gdbchang-yong-ming-ling/">GDB常用命令</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-06-04T19:32:28+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>7:32 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>GDB输出相关</h1>

<h2>打印格式指定</h2>

<blockquote><p>print / \&lt;f> \&lt;expr></p></blockquote>

<h2>输出基类执行绑定的动态类型</h2>

<blockquote><p>set print object on
p ptr</p></blockquote>

<h2>输出内存形式</h2>

<blockquote><p>x / nfu addr</p></blockquote>

<h2>以数组形式打印内存</h2>

<blockquote><p>p *array@len
p/x (short[2])0x12345678</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/29/zheng-ze-biao-da-shi/">正则表达式</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-29T22:58:24+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:58 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>匹配行头：^
匹配行尾：$</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/29/emacschang-yong-ming-ling/">Emacs常用命令</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-29T21:52:31+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:52 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>搜索与查找</h1>

<p>正则查找：C-M-s C-M-r</p>

<p>普通查找：C-S C-r</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/15/ao-man-yu-pian-jian/">Pride and Prejudice</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-15T20:38:11+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>8:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>简介</h1>

<p>Pride and Prejudice(中文:傲慢与偏见)，是英国小说家简·奥斯丁的代表作，主要讲述了班纳特家两个姐妹的爱情故事，反映了19世纪英国乡绅阶层的生活、民俗、爱情等。</p>

<h1>回味</h1>

<h2>书名</h2>

<p>刚开始阅读这部小说时，觉得这个书名很奇怪，通过书名无法体味到要表达怎样的一种情愫。但是随着阅读的深入，慢慢体会到这两个词贯穿了整个故事情节。“傲慢”毋庸置疑是对达西的评价，他是个富有的绅士，是一个大地主，是小说中描述的上层阶级，从小被教育要看不起除家里以外的任何人；但是，当爱情到来时，他察觉到了自己的傲慢，也用于放下自己的傲慢，哪怕是对哪些可能会影响其名誉的人仍旧如此。“偏见”指的是小说中的另一位主人公——伊丽莎白，她聪明伶俐，美丽大方，被所有人所喜爱，是的傲慢的达西一见钟情；然后，恰恰是她的“聪明”使他对很对事情有着自以为正确的偏见。当达西与伊丽莎白相遇后，这种傲慢与偏见的态度有都纷纷表现在对对方的态度上。好在故事的最后，主人公们为了爱情突破一道道屏障，最后走到了一起，从此过上了幸福快乐的生活。</p>

<h2>现实生活中的傲慢与偏见</h2>

<p>在阅读小说的过程中发现，日常中的我们不也是充满着傲慢与偏见吗？对于不如我们的人，我们是不是会存在着一种傲慢的心里对待他们，我想大多数的或多或少有一些的；对于做事风格与我们不符的人，我们又会不会对其有所偏见的，这个应该也是逃不过的。小说中，与达西和伊丽莎白产生明显对比的是另一对主人公：彬格莱和吉英。彬格莱先生性格温和、为人体贴；吉英美丽善良、温柔体贴、善解人意。生活中，如果能做到像他们一样，一定可以少许多的怨气，生活也会快乐些。世界上没有完美的人，许多我们所不喜欢的人往往都是由于自己的傲慢与偏见造成的，努力放弃这些，去捡拾每个人身上的优点，这样世界会更加美好。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/15/use-oracle-explain/">Use Oracle Explain</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-15T20:08:21+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>8:08 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>生成explain</h2>

<pre><code>SQL&gt; explain plan into plan_table for  select /*+index(test testi) */ * from t1;

Explained.
</code></pre>

<h2>查看含有outline的explain</h2>

<pre><code>SQL&gt; select * from table(dbms_xplan.display('PLAN_TABLE',NULL,'OUTLINE'));

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 3617692013

--------------------------------------------------------------------------
| Id  | Operation     | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |  |     1 |    13 |     2   (0)| 00:00:01 |
|   1 |  TABLE ACCESS FULL| T1    |     1 |    13 |     2   (0)| 00:00:01 |
--------------------------------------------------------------------------

Outline Data
-------------

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

  /*+
        BEGIN_OUTLINE_DATA
        FULL(@"SEL$1" "T1"@"SEL$1")
        OUTLINE_LEAF(@"SEL$1")
        ALL_ROWS
        DB_VERSION('11.2.0.2')
        OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
        IGNORE_OPTIM_EMBEDDED_HINTS
        END_OUTLINE_DATA
   */

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

Note
-----
   - dynamic sampling used for this statement (level=2)

26 rows selected.
</code></pre>

<h2>index 的表现</h2>

<pre><code>    SQL&gt; select * from table(dbms_xplan.display('plan_table',NULL,'OUTLINE'));

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    Plan hash value: 2965991605

    ---------------------------------------------------------------------------------
    | Id  | Operation    | Name     | Rows  | Bytes | Cost (%CPU)| Time |
    ---------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT |      |     1 |    13 |     0   (0)| 00:00:01 |
    |   1 |  INDEX FULL SCAN | SYS_C0011876 |     1 |    13 |     0   (0)| 00:00:01 |
    ---------------------------------------------------------------------------------

    Outline Data
    -------------

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

      /*+
          BEGIN_OUTLINE_DATA
          INDEX(@"SEL$1" "T1"@"SEL$1" ("T1"."C1"))
          OUTLINE_LEAF(@"SEL$1")
          ALL_ROWS
          DB_VERSION('11.2.0.2')
          OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
          IGNORE_OPTIM_EMBEDDED_HINTS
          END_OUTLINE_DATA
      */

    22 rows selected.
</code></pre>

<p>IOT表的表现
    SQL> select * from     table(dbms_xplan.display(&lsquo;plan_table&rsquo;,NULL,&lsquo;OUTLINE&rsquo;));</p>

<pre><code>    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    Plan hash value: 900014233

    ------------------------------------------------------------------------------------------
    | Id  | Operation        | Name      | Rows  | Bytes | Cost (%CPU)| Time     |
    ------------------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT     |           |     1 |  1050 |   802   (0)| 00:00:10 |
    |   1 |  INDEX FAST FULL SCAN| PK_ADMIN_DOCINDEX |     1 |  1050 |   802   (0)| 00:00:10 |
    ------------------------------------------------------------------------------------------

    Outline Data
    -------------

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

      /*+
          BEGIN_OUTLINE_DATA
          INDEX_FFS(@"SEL$1" "ADMIN_DOCINDEX"@"SEL$1" ("ADMIN_DOCINDEX"."TOKEN"
              "ADMIN_DOCINDEX"."DOC_ID"))
          OUTLINE_LEAF(@"SEL$1")
          ALL_ROWS
          DB_VERSION('11.2.0.2')
          OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
          IGNORE_OPTIM_EMBEDDED_HINTS
          END_OUTLINE_DATA

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      */

    Note
    -----
       - dynamic sampling used for this statement (level=2)

    27 rows selected.
</code></pre>

<h2>涉及到rewrite时，hint中的qb_name</h2>

<pre><code>    SQL&gt; select * from table(dbms_xplan.display('plan_table',NULL,'OUTLINE'));

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    Plan hash value: 1463220175

    -------------------------------------------------------------------------------------
    | Id  | Operation        | Name     | Rows  | Bytes | Cost (%CPU)| Time     |
    -------------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT     |          |     1 |    13 |     0   (0)| 00:00:01 |
    |   1 |  MERGE JOIN CARTESIAN|          |     1 |    13 |     0   (0)| 00:00:01 |
    |   2 |   INDEX FULL SCAN    | SYS_C0011876 |     1 |    13 |     0   (0)| 00:00:01 |
    |   3 |   BUFFER SORT        |          |     1 |       |     0   (0)| 00:00:01 |
    |   4 |    INDEX FULL SCAN   | SYS_C0011877 |     1 |       |     0   (0)| 00:00:01 |
    -------------------------------------------------------------------------------------

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Outline Data
    -------------

      /*+
          BEGIN_OUTLINE_DATA
          USE_MERGE_CARTESIAN(@"SEL$F5BB74E1" "T2"@"SEL$2")
          LEADING(@"SEL$F5BB74E1" "T1"@"SEL$2" "T2"@"SEL$2")
          INDEX(@"SEL$F5BB74E1" "T2"@"SEL$2" ("T2"."C2"))
          INDEX(@"SEL$F5BB74E1" "T1"@"SEL$2" ("T1"."C1"))
          OUTLINE(@"SEL$2")

    PLAN_TABLE_OUTPUT
    --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
          OUTLINE(@"SEL$1")
          MERGE(@"SEL$2")
          OUTLINE_LEAF(@"SEL$F5BB74E1")
          ALL_ROWS
          DB_VERSION('11.2.0.2')
          OPTIMIZER_FEATURES_ENABLE('11.2.0.2')
          IGNORE_OPTIM_EMBEDDED_HINTS
          END_OUTLINE_DATA
      */

    31 rows selected.
</code></pre>

<h2>多表join的情况</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">explain</span> <span class="n">plan</span> <span class="k">into</span> <span class="n">plan_table</span> <span class="k">for</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">,</span><span class="n">t3</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Explained</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">table</span><span class="p">(</span><span class="n">dbms_xplan</span><span class="p">.</span><span class="n">display</span><span class="p">(</span><span class="s1">&#39;plan_table&#39;</span><span class="p">,</span><span class="k">NULL</span><span class="p">,</span><span class="s1">&#39;OUTLINE&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Plan</span> <span class="n">hash</span> <span class="n">value</span><span class="p">:</span> <span class="mi">457197764</span>
</span><span class='line'>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span> <span class="n">Id</span>  <span class="o">|</span> <span class="k">Operation</span>       <span class="o">|</span> <span class="n">Name</span>       <span class="o">|</span> <span class="k">Rows</span>  <span class="o">|</span> <span class="n">Bytes</span> <span class="o">|</span> <span class="n">Cost</span> <span class="p">(</span><span class="o">%</span><span class="n">CPU</span><span class="p">)</span><span class="o">|</span> <span class="n">Time</span>     <span class="o">|</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">0</span> <span class="o">|</span> <span class="k">SELECT</span> <span class="k">STATEMENT</span>      <span class="o">|</span>         <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">39</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>  <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span> <span class="o">|</span>          <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">39</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>   <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span><span class="o">|</span>          <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">26</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>    <span class="k">INDEX</span> <span class="k">FULL</span> <span class="n">SCAN</span>    <span class="o">|</span> <span class="n">SYS_C0011876</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span>    <span class="n">BUFFER</span> <span class="n">SORT</span>          <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>     <span class="k">INDEX</span> <span class="k">FULL</span> <span class="n">SCAN</span>   <span class="o">|</span> <span class="n">SYS_C0011877</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>   <span class="n">BUFFER</span> <span class="n">SORT</span>       <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">7</span> <span class="o">|</span>    <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span>  <span class="o">|</span> <span class="n">T3</span>        <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">Outline</span> <span class="k">Data</span>
</span><span class='line'><span class="c1">-------------</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*+</span>
</span><span class='line'><span class="cm">      BEGIN_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;T3&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="cm">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="cm">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="cm">      LEADING(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot; &quot;T3&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$1&quot; &quot;T3&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      INDEX(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot; (&quot;T2&quot;.&quot;C2&quot;))</span>
</span><span class='line'><span class="cm">      INDEX(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; (&quot;T1&quot;.&quot;C1&quot;))</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      ALL_ROWS</span>
</span><span class='line'><span class="cm">      DB_VERSION(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      OPTIMIZER_FEATURES_ENABLE(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      IGNORE_OPTIM_EMBEDDED_HINTS</span>
</span><span class='line'><span class="cm">      END_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'><span class="mi">33</span> <span class="k">rows</span> <span class="n">selected</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>join含有view的情况</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">explain</span> <span class="n">plan</span> <span class="k">into</span> <span class="n">plan_table</span> <span class="k">for</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span>  <span class="n">t1</span><span class="p">,</span> <span class="p">(</span><span class="k">select</span> <span class="k">max</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span> <span class="k">from</span> <span class="n">t2</span><span class="p">)</span>  <span class="n">tt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Explained</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">table</span><span class="p">(</span><span class="n">dbms_xplan</span><span class="p">.</span><span class="n">display</span><span class="p">(</span><span class="s1">&#39;plan_table&#39;</span><span class="p">,</span><span class="k">NULL</span><span class="p">,</span><span class="s1">&#39;outline&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Plan</span> <span class="n">hash</span> <span class="n">value</span><span class="p">:</span> <span class="mi">3649077807</span>
</span><span class='line'>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span> <span class="n">Id</span>  <span class="o">|</span> <span class="k">Operation</span>           <span class="o">|</span> <span class="n">Name</span>       <span class="o">|</span> <span class="k">Rows</span>  <span class="o">|</span> <span class="n">Bytes</span> <span class="o">|</span> <span class="n">Cost</span> <span class="p">(</span><span class="o">%</span><span class="n">CPU</span><span class="p">)</span><span class="o">|</span> <span class="n">Time</span>     <span class="o">|</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">0</span> <span class="o">|</span> <span class="k">SELECT</span> <span class="k">STATEMENT</span>        <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">26</span> <span class="o">|</span>      <span class="mi">1</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>  <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span>        <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">26</span> <span class="o">|</span>      <span class="mi">1</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>   <span class="k">INDEX</span> <span class="k">FULL</span> <span class="n">SCAN</span>        <span class="o">|</span> <span class="n">SYS_C0011876</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>   <span class="n">BUFFER</span> <span class="n">SORT</span>           <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">1</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span>    <span class="k">VIEW</span>            <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">1</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>     <span class="n">SORT</span> <span class="k">AGGREGATE</span>          <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>         <span class="o">|</span>       <span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>      <span class="k">INDEX</span> <span class="k">FULL</span> <span class="n">SCAN</span> <span class="p">(</span><span class="k">MIN</span><span class="o">/</span><span class="k">MAX</span><span class="p">)</span><span class="o">|</span> <span class="n">SYS_C0011877</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">1</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">Outline</span> <span class="k">Data</span>
</span><span class='line'><span class="c1">-------------</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*+</span>
</span><span class='line'><span class="cm">      BEGIN_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">      INDEX(@&quot;SEL$2&quot; &quot;T2&quot;@&quot;SEL$2&quot; (&quot;T2&quot;.&quot;C2&quot;))</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;TT&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      LEADING(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; &quot;TT&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="cm">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="cm">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="cm">      NO_ACCESS(@&quot;SEL$1&quot; &quot;TT&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      INDEX(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; (&quot;T1&quot;.&quot;C1&quot;))</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$2&quot;)</span>
</span><span class='line'><span class="cm">      ALL_ROWS</span>
</span><span class='line'><span class="cm">      DB_VERSION(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      OPTIMIZER_FEATURES_ENABLE(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      IGNORE_OPTIM_EMBEDDED_HINTS</span>
</span><span class='line'><span class="cm">      END_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'><span class="mi">32</span> <span class="k">rows</span> <span class="n">selected</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>busy tree</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">explain</span> <span class="n">plan</span> <span class="k">into</span> <span class="n">plan_table</span> <span class="k">for</span> <span class="k">select</span> <span class="o">*</span><span class="cm">/*+leading(tt, t1,t2) use_nl(t1) use_nl(t2)*/</span> <span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="cm">/*+NO_MERGE*/</span><span class="o">*</span> <span class="k">from</span> <span class="n">t3</span><span class="p">,</span><span class="n">t4</span><span class="p">)</span> <span class="n">tt</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Explained</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">table</span><span class="p">(</span><span class="n">dbms_xplan</span><span class="p">.</span><span class="n">display</span><span class="p">(</span><span class="s1">&#39;plan_table&#39;</span><span class="p">,</span><span class="k">NULL</span><span class="p">,</span><span class="s1">&#39;outline&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Plan</span> <span class="n">hash</span> <span class="n">value</span><span class="p">:</span> <span class="mi">276994482</span>
</span><span class='line'>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span> <span class="n">Id</span>  <span class="o">|</span> <span class="k">Operation</span>     <span class="o">|</span> <span class="n">Name</span> <span class="o">|</span> <span class="k">Rows</span>  <span class="o">|</span> <span class="n">Bytes</span> <span class="o">|</span> <span class="n">Cost</span> <span class="p">(</span><span class="o">%</span><span class="n">CPU</span><span class="p">)</span><span class="o">|</span> <span class="n">Time</span>     <span class="o">|</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">0</span> <span class="o">|</span> <span class="k">SELECT</span> <span class="k">STATEMENT</span>  <span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">52</span> <span class="o">|</span>     <span class="mi">8</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>  <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span>  <span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">52</span> <span class="o">|</span>     <span class="mi">8</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>   <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span> <span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">26</span> <span class="o">|</span>     <span class="mi">4</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>    <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span>   <span class="o">|</span> <span class="n">T1</span>   <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">2</span>    <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span>    <span class="n">BUFFER</span> <span class="n">SORT</span>        <span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>     <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span>  <span class="o">|</span> <span class="n">T2</span>   <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">2</span>    <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>   <span class="n">BUFFER</span> <span class="n">SORT</span>     <span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">26</span> <span class="o">|</span>     <span class="mi">6</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">7</span> <span class="o">|</span>    <span class="k">VIEW</span>      <span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">26</span> <span class="o">|</span>     <span class="mi">4</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">8</span> <span class="o">|</span>     <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span><span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">26</span> <span class="o">|</span>     <span class="mi">4</span>  <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">9</span> <span class="o">|</span>      <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span> <span class="o">|</span> <span class="n">T3</span>   <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">2</span>    <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>  <span class="mi">10</span> <span class="o">|</span>      <span class="n">BUFFER</span> <span class="n">SORT</span>  <span class="o">|</span>      <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>  <span class="mi">11</span> <span class="o">|</span>       <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span> <span class="o">|</span> <span class="n">T4</span>   <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">Outline</span> <span class="k">Data</span>
</span><span class='line'><span class="c1">-------------</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="cm">/*+</span>
</span><span class='line'><span class="cm">      BEGIN_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$2&quot; &quot;T4&quot;@&quot;SEL$2&quot;)</span>
</span><span class='line'><span class="cm">      LEADING(@&quot;SEL$2&quot; &quot;T3&quot;@&quot;SEL$2&quot; &quot;T4&quot;@&quot;SEL$2&quot;)</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$2&quot; &quot;T4&quot;@&quot;SEL$2&quot;)</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$2&quot; &quot;T3&quot;@&quot;SEL$2&quot;)</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;TT&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      LEADING(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot; &quot;TT&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      NO_ACCESS(@&quot;SEL$1&quot; &quot;TT&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="cm">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="cm">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$2&quot;)</span>
</span><span class='line'><span class="cm">      ALL_ROWS</span>
</span><span class='line'><span class="cm">      DB_VERSION(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      OPTIMIZER_FEATURES_ENABLE(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      IGNORE_OPTIM_EMBEDDED_HINTS</span>
</span><span class='line'><span class="cm">      END_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'><span class="n">Note</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">----------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="c1">-----</span>
</span><span class='line'>   <span class="o">-</span> <span class="k">dynamic</span> <span class="n">sampling</span> <span class="n">used</span> <span class="k">for</span> <span class="n">this</span> <span class="k">statement</span> <span class="p">(</span><span class="k">level</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="mi">46</span> <span class="k">rows</span> <span class="n">selected</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>指定ordered hint的情况</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">explain</span> <span class="n">plan</span> <span class="k">into</span> <span class="n">plan_table</span> <span class="k">for</span> <span class="k">select</span> <span class="cm">/*+ordered*/</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Explained</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">PLAN_TABLE_OUTPUT</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">DBMS_XPLAN</span><span class="p">.</span><span class="n">DISPLAY</span><span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="s1">&#39;outline&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Plan</span> <span class="n">hash</span> <span class="n">value</span><span class="p">:</span> <span class="mi">787647388</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-----------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span> <span class="n">Id</span>  <span class="o">|</span> <span class="k">Operation</span>      <span class="o">|</span> <span class="n">Name</span> <span class="o">|</span> <span class="k">Rows</span>  <span class="o">|</span> <span class="n">Bytes</span> <span class="o">|</span> <span class="n">Cost</span> <span class="p">(</span><span class="o">%</span><span class="n">CPU</span><span class="p">)</span><span class="o">|</span> <span class="n">Time</span>     <span class="o">|</span>
</span><span class='line'><span class="c1">-----------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">0</span> <span class="o">|</span> <span class="k">SELECT</span> <span class="k">STATEMENT</span>     <span class="o">|</span>     <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">26</span> <span class="o">|</span>      <span class="mi">4</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>  <span class="n">MERGE</span> <span class="k">JOIN</span> <span class="n">CARTESIAN</span><span class="o">|</span>      <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">26</span> <span class="o">|</span>      <span class="mi">4</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>   <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span>  <span class="o">|</span> <span class="n">T1</span>   <span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>   <span class="n">BUFFER</span> <span class="n">SORT</span>      <span class="o">|</span>       <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span>    <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span> <span class="o">|</span> <span class="n">T2</span>   <span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>     <span class="mi">13</span> <span class="o">|</span>      <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="c1">-----------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">Outline</span> <span class="k">Data</span>
</span><span class='line'><span class="c1">-------------</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*+</span>
</span><span class='line'><span class="cm">      BEGIN_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">      USE_MERGE_CARTESIAN(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      LEADING(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$1&quot; &quot;T2&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      FULL(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$1&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="cm">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="cm">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="cm">      ALL_ROWS</span>
</span><span class='line'><span class="cm">      DB_VERSION(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      OPTIMIZER_FEATURES_ENABLE(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      IGNORE_OPTIM_EMBEDDED_HINTS</span>
</span><span class='line'><span class="cm">      END_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'><span class="mi">28</span> <span class="k">rows</span> <span class="n">selected</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>update outline输出</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">explain</span> <span class="n">plan</span> <span class="k">into</span> <span class="n">plan_table</span> <span class="k">for</span> <span class="k">update</span>  <span class="n">t1</span> <span class="k">set</span> <span class="n">c1</span><span class="o">=</span> <span class="mi">100</span> <span class="k">where</span> <span class="n">c1</span><span class="o">=</span><span class="mi">1</span> <span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Explained</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">table</span><span class="p">(</span><span class="n">dbms_xplan</span><span class="p">.</span><span class="n">display</span><span class="p">(</span><span class="s1">&#39;PLAN_TABLE&#39;</span><span class="p">,</span><span class="k">NULL</span><span class="p">,</span><span class="s1">&#39;OUTLINE&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Plan</span> <span class="n">hash</span> <span class="n">value</span><span class="p">:</span> <span class="mi">2927627013</span>
</span><span class='line'>
</span><span class='line'><span class="c1">---------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span> <span class="n">Id</span>  <span class="o">|</span> <span class="k">Operation</span>    <span class="o">|</span> <span class="n">Name</span> <span class="o">|</span> <span class="k">Rows</span>  <span class="o">|</span> <span class="n">Bytes</span> <span class="o">|</span> <span class="n">Cost</span> <span class="p">(</span><span class="o">%</span><span class="n">CPU</span><span class="p">)</span><span class="o">|</span> <span class="n">Time</span>   <span class="o">|</span>
</span><span class='line'><span class="c1">---------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">0</span> <span class="o">|</span> <span class="k">UPDATE</span> <span class="k">STATEMENT</span>   <span class="o">|</span>     <span class="o">|</span>  <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>   <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>  <span class="k">UPDATE</span>     <span class="o">|</span> <span class="n">T1</span>   <span class="o">|</span>      <span class="o">|</span>    <span class="o">|</span>         <span class="o">|</span>   <span class="o">|</span>
</span><span class='line'><span class="o">|*</span>  <span class="mi">2</span> <span class="o">|</span>   <span class="k">TABLE</span> <span class="k">ACCESS</span> <span class="k">FULL</span><span class="o">|</span> <span class="n">T1</span>   <span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>   <span class="mi">2</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="c1">---------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">Outline</span> <span class="k">Data</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="c1">-------------</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*+</span>
</span><span class='line'><span class="cm">      BEGIN_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">      FULL(@&quot;UPD$1&quot; &quot;T1&quot;@&quot;UPD$1&quot;)</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;UPD$1&quot;)</span>
</span><span class='line'><span class="cm">      ALL_ROWS</span>
</span><span class='line'><span class="cm">      DB_VERSION(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      OPTIMIZER_FEATURES_ENABLE(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      IGNORE_OPTIM_EMBEDDED_HINTS</span>
</span><span class='line'><span class="cm">      END_OUTLINE_DATA</span>
</span><span class='line'>
</span><span class='line'><span class="cm">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="cm">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'><span class="n">Predicate</span> <span class="n">Information</span> <span class="p">(</span><span class="n">identified</span> <span class="k">by</span> <span class="k">operation</span> <span class="n">id</span><span class="p">):</span>
</span><span class='line'><span class="c1">---------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'>   <span class="mi">2</span> <span class="o">-</span> <span class="n">filter</span><span class="p">(</span><span class="ss">&quot;C1&quot;</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="mi">28</span> <span class="k">rows</span> <span class="n">selected</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Oracle对于USE_HASH_AGGREGATION和NO_USE_HASH_AGGREGATION的使用</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="n">name</span> <span class="p">,</span> <span class="k">version</span> <span class="k">from</span> <span class="n">v</span><span class="err">$</span><span class="n">sql_hint</span> <span class="k">where</span> <span class="k">class</span> <span class="k">like</span> <span class="s1">&#39;%HASH%&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">NAME</span>                                <span class="k">VERSION</span>
</span><span class='line'><span class="c1">---------------------------------------------------------------- -------------------------</span>
</span><span class='line'><span class="n">USE_HASH_AGGREGATION</span>                        <span class="mi">10</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span>
</span><span class='line'><span class="n">NO_USE_HASH_AGGREGATION</span>                     <span class="mi">10</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span>
</span><span class='line'><span class="n">NO_USE_HASH</span>                             <span class="mi">10</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">3</span>
</span><span class='line'><span class="n">USE_HASH_GBY_FOR_PUSHDOWN</span>                   <span class="mi">11</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span>
</span><span class='line'><span class="n">NO_USE_HASH_GBY_FOR_PUSHDOWN</span>                    <span class="mi">11</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span>
</span></code></pre></td></tr></table></div></figure>


<p>使用USE_HASH_AGGREGATION,看能否生效。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">explain</span> <span class="n">plan</span> <span class="k">into</span> <span class="n">plan_table</span> <span class="k">for</span> <span class="k">select</span> <span class="cm">/*+ USE_HASH_AGGREGATION(@SEL$1)*/</span><span class="k">max</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span> <span class="k">from</span> <span class="n">t1</span> <span class="k">group</span> <span class="k">by</span> <span class="n">c1</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Explained</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">table</span><span class="p">(</span><span class="n">dbms_xplan</span><span class="p">.</span><span class="n">display</span><span class="p">(</span><span class="s1">&#39;plan_table&#39;</span><span class="p">,</span><span class="k">NULL</span><span class="p">,</span><span class="s1">&#39;OUTLINE&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="n">PLAN_TABLE_OUTPUT</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Plan</span> <span class="n">hash</span> <span class="n">value</span><span class="p">:</span> <span class="mi">274432217</span>
</span><span class='line'>
</span><span class='line'><span class="c1">---------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span> <span class="n">Id</span>  <span class="o">|</span> <span class="k">Operation</span>  <span class="o">|</span> <span class="n">Name</span>   <span class="o">|</span> <span class="k">Rows</span>    <span class="o">|</span> <span class="n">Bytes</span> <span class="o">|</span> <span class="n">Cost</span> <span class="p">(</span><span class="o">%</span><span class="n">CPU</span><span class="p">)</span><span class="o">|</span> <span class="n">Time</span>   <span class="o">|</span>
</span><span class='line'><span class="c1">---------------------------------------------------------------------------------</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">0</span> <span class="o">|</span> <span class="k">SELECT</span> <span class="k">STATEMENT</span> <span class="o">|</span>     <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>  <span class="n">HASH</span> <span class="k">GROUP</span> <span class="k">BY</span>  <span class="o">|</span>       <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>   <span class="k">INDEX</span> <span class="k">FULL</span> <span class="n">SCAN</span><span class="o">|</span> <span class="n">SYS_C0012306</span> <span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span>     <span class="mi">0</span>   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
</span><span class='line'><span class="c1">---------------------------------------------------------------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="n">Outline</span> <span class="k">Data</span>
</span><span class='line'><span class="c1">-------------</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*+</span>
</span><span class='line'><span class="cm">      BEGIN_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">      USE_HASH_AGGREGATION(@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      INDEX(@&quot;SEL$1&quot; &quot;T1&quot;@&quot;SEL$1&quot; (&quot;T1&quot;.&quot;C1&quot;))</span>
</span><span class='line'><span class="cm">      OUTLINE_LEAF(@&quot;SEL$1&quot;)</span>
</span><span class='line'><span class="cm">      ALL_ROWS</span>
</span><span class='line'><span class="cm">      DB_VERSION(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      OPTIMIZER_FEATURES_ENABLE(&#39;11.2.0.2&#39;)</span>
</span><span class='line'><span class="cm">      IGNORE_OPTIM_EMBEDDED_HINTS</span>
</span><span class='line'><span class="cm">      END_OUTLINE_DATA</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'><span class="mi">24</span> <span class="k">rows</span> <span class="n">selected</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>可见，成功使用该HINT。 oracle的当前版本如下。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SQL</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">v</span><span class="err">$</span><span class="k">version</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">BANNER</span>
</span><span class='line'><span class="c1">--------------------------------------------------------------------------------</span>
</span><span class='line'><span class="n">Oracle</span> <span class="k">Database</span> <span class="mi">11</span><span class="k">g</span> <span class="n">Enterprise</span> <span class="n">Edition</span> <span class="n">Release</span> <span class="mi">11</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="mi">64</span><span class="nb">bit</span> <span class="n">Production</span>
</span><span class='line'><span class="n">PL</span><span class="o">/</span><span class="k">SQL</span> <span class="n">Release</span> <span class="mi">11</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">Production</span>
</span><span class='line'><span class="n">CORE</span>   <span class="mi">11</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span>  <span class="n">Production</span>
</span><span class='line'><span class="n">TNS</span> <span class="k">for</span> <span class="n">Linux</span><span class="p">:</span> <span class="k">Version</span> <span class="mi">11</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">Production</span>
</span><span class='line'><span class="n">NLSRTL</span> <span class="k">Version</span> <span class="mi">11</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">Production</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/02/12/the-first/">The First</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-02-12T19:35:55+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>7:35 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Hello World</h1>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/06/04/gdbchang-yong-ming-ling/">GDB常用命令</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/29/zheng-ze-biao-da-shi/">正则表达式</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/29/emacschang-yong-ming-ling/">Emacs常用命令</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/15/ao-man-yu-pian-jian/">Pride and Prejudice</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/15/use-oracle-explain/">Use Oracle Explain</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Yan Tingshuai -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
